一面

如何保证资金实效
* 定时任务+人工审批+系统自动批处理
* 主要靠监控发现问题

如何保证资金安全
* 输入数据的无误：diam
* 处理数据无误：监控 + 事后对账
* 完备的操作流程

分布式事务
	本地消息表

acid 特性如何实现

bin log 写入时机
gap lock
	什么条件下加 gap lock
两个账户互相转账，写一个事务实现
	如果分别对 A、B 和 B、A 加锁会产生死锁，需要都按 A、B 或 B、A 的顺序加锁
设计领红包&发红包
	父红包-发
		过期退款
		子红包-领
		需要支付，支付记录对应父红包（交易信息）
		红包虚拟户间走资金系统转账，实时加信息流，资金异步？

leetcode 162

清结算系统核心指标