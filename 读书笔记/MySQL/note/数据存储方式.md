以下均基于 InnoDB

# 行（记录）

表中每一行数据的内容中除了各列值外，还有几个比较重要的内容：
* 变长字段长度列表：记录如 varchar 类型字段的长度
* row_id：行 ID，记录唯一标识，没有自定义主键及唯一索引时才存在
* transaction_id：事务 ID
* rolll_pointer：回滚指针

# 页

* 磁盘和内存交换数据的基本单位
* 管理存储的基本单位
* 页大小为 16KB

## 数据页

行在每页中：
* 逻辑上按照主键的升序构成一个单向链表
* 每条记录存有到逻辑上下一条记录的地址偏移量

### 页目录(page directory)

为了提升页中行的查找速度，页中的数据会分组，并将每组最后一条数据的地址偏移量记录在 page directory 中，标记为一个 slot

#### 页中查询行

当查询页中记录时，可以使用二分法定位待查找记录在哪个 slot 中，再遍历当前组的记录即可

### 页头(page header)

包含：
* 该页记录的条数
* 第一条数据的地址
* 校验和

### 文件头(file header)

包含：
* 页号：InnoDB 通过页号定位页的位置
* 上一页页号 & 下一页页号：让页形成双向链表

### 页尾(file trailer)

作用：用来检测页尾是否完整

包含：
* 校验和：和页头的对应，当在内存中将页修改后需要刷新回磁盘时，需要先计算新的校验和，页头处于页中记录的前边部分，所以会先将新的校验和刷新到磁盘，如果更新记录过程中断电等，那么页尾的校验和和页头不一致，就知道当前页同步出现异常
* LSN：页面被最后修改时对应的日志序列的位置