## 滴答视角

1. 每个一段时间触发一次定时滴答
2. 滴答会给 CPU 一个时钟中断信号
3. CPU 处理接收时钟中断信号，找到时钟中断处理函数
4. 时钟中断处理函数将当前进程持有的时间片减 1，如果大于 0 则结束，如果等于 0 则调用调度函数
5. 调度函数就是找到所有处于 RUNNABLE 的进程、根据调度算法找到一个线程、保存当前进程上下文、恢复调度进程上下文并执行

## OS 启动

```c
void main(void) {
    ...
    // 第一步：进程调度初始化
    sched_init();
    ...
    // 第二步：创建一个新进程并做些事
    if (!fork()) {
        init();
    }
    // 第三步：死循环，操作系统正式启动完毕
    for(;;) pause();
}
```

> 通过代码可以看出，运行着的 OS 就是通过中断驱动的一个死循环，而 pause 函数会触发系统空闲进程的执行（Linux 下即 0 号进程）

## 阻塞

本质就是将进程的状态改为非 RUNNABLE，使得 OS 的调度函数无法调度到这个进程