# 链路层

---

## 1. 作用

链路层在LAN（局域网）内负责解决多路访问的问题，在只存在一个二层设备（如交换机）的LAN的情况下，数据通过广播的方式发送，在网络中节点较多的情况下容易产生冲突，无用的转发造成浪费，控制数据发送的方式、规定发送顺序（MAC，Media Access Control，媒体接入控制）能够对多路访问的问题进行改善

局域网中的每个设备通过唯一的MAC地址来标识，对应设备的一块网卡

## 2. ARP协议

上层携带着目标IP将数据传送至链路层，链路层需要通过IP地址获取MAC地址后，二层设备才能根据MAC地址进行数据包的转发

**ARP过程**：

1. 查看本地ARP表，寻找目标IP对应MAC
2. 广播数据包
3. 局域网中各机器对比IP地址，与自身IP地址相同的机器仍旧使用广播的方式进行ARP应答
4. 缓存IP-MAC映射，由于局域网中机器会发生变化，此缓存也会过期

## 3. 交换机

交换机将数据包中的MAC头取出，根据MAC地址按照转发策略将数据包进行转发，属于二层设备

交换机具有「学习」的功能，在MACA端口发来数据包时交换机便会在转发表中记录此端口与MAC，随着数据包的不断发送，交换机逐渐会维护一个记录其所有端口对应的MAC的转发表
